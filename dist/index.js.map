{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"ramda/src/is\"","webpack:///external \"react\"","webpack:///external \"@babel/runtime/helpers/extends\"","webpack:///external \"ramda/src/path\"","webpack:///external \"ramda/src/clone\"","webpack:///external \"ramda/src/pick\"","webpack:///external \"ramda/src/isEmpty\"","webpack:///external \"ramda/src/mergeDeepRight\"","webpack:///./src/util.js","webpack:///./src/index.js"],"names":["get","target","source","path","run","args","res","is","Function","undefined","isAsyncFunction","cb","constructor","name","inWhich","type","obj","transBool","flag","Object","newObj","keys","forEach","item","StoreContext","React","createContext","LOADING","CACHE","initialState","initStore","asyncKey","newData","methodsName","actionAsync","doRun","key","actionArr","store","state","payload","reducer","action","_key","StoreProvider","props","middleware","console","error","hasLoadingMiddleware","filter","length","propsCacheExit","cache","setLoadingTrue","isEmpty","middlewareReducer","prevState","Array","Error","nextState","newState","localStorage","getItem","removeItem","mergeDeepRight","JSON","parse","origin_dispatch","useReducer","_state","clone","window","addEventListener","setItem","stringify","pick","dispatch","func","_action","children","useDispatchHook","useContext","useStateHook","useStoreHook","_store","_methods","methods","methodsArr","connect","mapStateToProps","mapDispatchToProps","Comp","rootState","i","Promise","resolve","reject","err","stateToProps","dispatchToProps"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","module.exports = require(\"ramda/src/is\");","module.exports = require(\"react\");","module.exports = require(\"@babel/runtime/helpers/extends\");","module.exports = require(\"ramda/src/path\");","module.exports = require(\"ramda/src/clone\");","module.exports = require(\"ramda/src/pick\");","module.exports = require(\"ramda/src/isEmpty\");","module.exports = require(\"ramda/src/mergeDeepRight\");","import is from 'ramda/src/is'\nimport path from 'ramda/src/path'\n\nexport function get(target, source) {\n  return path(target, source)\n}\n\nexport function run(target, source, ...args){\n  const res = get(target, source)\n  if(is(Function, res)){\n    return res(...args)\n  }\n  return undefined\n}\n\nexport function isAsyncFunction(cb){\n  if(!cb){\n    return false\n  }\n  return cb.constructor.name === 'AsyncFunction'\n}\n\n/**\n * 函数是否在effects/reducers/methods里面\n * @param {String} type  methods effects reducers \n * @param {Object} obj \n * @param {String} name \n */\nexport function inWhich(type, obj, name){\n  if(!obj){\n    return false\n  }\n\n  if(!obj[type]){\n    return false;\n  }\n\n  if (obj[type][name]) {\n    return true;\n  }\n}\n\nexport function transBool(obj, flag = true){\n  if(!is(Object, obj)){\n    return {}\n  }\n  \n  let newObj = {}\n  Object.keys(obj).forEach(item=>{\n    newObj[item] = flag\n  })\n  return newObj\n}\n","import React, { useContext, useReducer } from 'react'\nimport { get, run, isAsyncFunction, inWhich, transBool } from './util'\nimport is from 'ramda/src/is'\nimport clone from 'ramda/src/clone'\nimport pick from 'ramda/src/pick'\nimport isEmpty from 'ramda/src/isEmpty'\nimport mergeDeepRight from 'ramda/src/mergeDeepRight'\n\nconst StoreContext = React.createContext()\n\nconst LOADING = 'hook-loading-clear'\nconst CACHE = 'react-store:cache'\n\nlet initialState = {},\n  initStore = {}, //传入的store\n  asyncKey,\n  newData,\n  methodsName = {}, //所有方法名\n  actionAsync //触发的异步方法\n\nfunction doRun(key, actionArr, type, store, state, payload) {\n  let res\n  actionArr.forEach(item => {\n    if (get([key, item, type], store)) {\n      res = run([key, item, type], store, state, payload)\n    }\n  })\n  newData = res\n  return res\n}\n\nfunction reducer(state, action) {\n  const { key, type, payload } = action\n  const _key = key || asyncKey\n\n  return {\n    ...state,\n    [_key]: {\n      ...state[_key],\n      ...doRun(_key, ['methods', 'reducers', 'effects'], type, initStore, state[_key], payload)\n    }\n  }\n}\n\nfunction StoreProvider(props) {\n  const { store, middleware } = props;\n  if (!store) {\n    console.error(`\n      store 必须有值，类似于：\n      <StoreProvider store={store}>\n      `)\n    return null\n  }\n\n  const hasLoadingMiddleware = middleware.filter(item => item.name === 'loading').length\n  const propsCacheExit = props?.cache?.length\n\n  if (hasLoadingMiddleware) {\n    function setLoadingTrue() {\n      if (isEmpty(methodsName)) {\n        Object.keys(store).forEach(item => {\n          methodsName[item] = {\n            ...transBool(get([item, 'methods'], store), false),\n            ...transBool(get([item, 'reducers'], store), false),\n            ...transBool(get([item, 'effects'], store), false)\n          }\n        })\n      }\n    }\n    setLoadingTrue()\n  }\n\n  initStore = store\n\n  // 中间件\n  function middlewareReducer(prevState, action) {\n    if (!action) {\n      return store;\n    }\n\n    if (middleware) {\n      if (!is(Array, middleware)) {\n        throw new Error('middleware中间件必须为数组')\n      }\n    }\n\n    let nextState = reducer(prevState, action);\n\n    middleware && middleware.forEach(item => {\n      const newState = item(store, prevState, nextState, action, actionAsync, asyncKey, props?.cache)\n      if (newState) {\n        nextState = newState\n      }\n    })\n\n    return nextState;\n  }\n\n  Object.keys(initStore).forEach(item => {\n    initialState[item] = initStore[item]['state']\n  });\n\n  // 初始化-读取缓存\n  if (!propsCacheExit && localStorage.getItem(CACHE)) { // cache配置没有，但是有localStorage，需要清除\n    localStorage.removeItem(CACHE)\n  }\n  if (propsCacheExit && localStorage.getItem(CACHE)) {\n    initialState = mergeDeepRight(initialState, JSON.parse(localStorage.getItem(CACHE)))\n  }\n\n  if (hasLoadingMiddleware) {\n    initialState['loading'] = methodsName\n  }\n\n  const [state, origin_dispatch] = useReducer(middlewareReducer, initialState)\n  let _state = clone(state)\n\n  // 页面刷新时候缓存数据\n  propsCacheExit && window.addEventListener('beforeunload', () => {\n    localStorage.setItem(CACHE, JSON.stringify(pick(props.cache, _state)))\n  });\n\n\n  const dispatch = async (action, payload, key) => {\n    actionAsync = undefined\n\n    if (get([asyncKey, 'reducers', action.type], initStore)) {\n      return origin_dispatch(action);\n    }\n\n    if (!isAsyncFunction(action) && inWhich('effects', initStore[action.key || asyncKey], action.type)) {\n      asyncKey = action.key\n      actionAsync = action.type\n\n      if (hasLoadingMiddleware) {\n        origin_dispatch({\n          key: asyncKey,\n          type: LOADING,\n          payload: actionAsync\n        })\n      }\n\n      const func = get([action.key, 'effects', action.type], initStore)\n      return await func(origin_dispatch, _state, action.payload)\n    }\n\n    if (isAsyncFunction(action) || get([asyncKey, 'effects', action], initStore)) {\n      asyncKey = key\n      actionAsync = action.name\n\n      if (hasLoadingMiddleware) {\n        origin_dispatch({\n          key: asyncKey,\n          type: LOADING,\n          payload: action.name,\n        })\n      }\n\n      return await action(origin_dispatch, state, payload);\n    }\n\n    if (!isAsyncFunction(action) && is(Function, action)) {\n      if (is(Object, action())) {\n        const _action = get([action().key, 'methods', action().type], initStore) ||\n          get([action().key, 'effects', action().type], initStore)\n\n        if (is(Function, _action)) {\n          asyncKey = action().key\n          actionAsync = action().type\n\n          if (hasLoadingMiddleware) {\n            origin_dispatch({\n              key: asyncKey,\n              type: LOADING,\n              payload: actionAsync\n            })\n          }\n\n          return await _action(origin_dispatch, state, action().payload);\n        }\n      }\n    }\n\n    return origin_dispatch(action);\n  }\n\n  return (\n    <StoreContext.Provider value={{ state, dispatch }}>\n      {props.children}\n    </StoreContext.Provider>\n  );\n};\n\nfunction useDispatchHook(key) {\n  const store = useContext(StoreContext)\n  if (key) {\n    asyncKey = key\n  }\n  return store.dispatch\n}\n\nfunction useStateHook(key) {\n  const store = useContext(StoreContext)\n\n  return key ? get(['state', key], store) : get(['state'], store)\n}\n\n/*返回state和方法\n{\n  user: {id:1,getUser(state,payload){xxxx}}\n}\n*/\nfunction useStoreHook() {\n  const { state, dispatch } = useContext(StoreContext)\n  let _store = {}\n  Object.keys(state).forEach(key => {\n    let _methods = {}\n    const methods = {\n      ...get([key, 'methods'], initStore),\n      ...get([key, 'reducers'], initStore),\n      ...get([key, 'effects'], initStore)\n    }\n    const methodsArr = methods && Object.keys(methods)\n\n    is(Array, methodsArr) && methodsArr.forEach(item => {\n      if (isAsyncFunction(methods[item]) || inWhich('effects', initStore[key], item)) {\n        _methods[item] = async (payload) => {\n          await dispatch(methods[item], payload, key)\n        }\n      }\n\n      if (!isAsyncFunction(methods[item]) && is(Function, methods[item])) {\n        _methods[item] = (payload) => {\n          dispatch({\n            key: key,\n            type: item,\n            payload\n          })\n        }\n      }\n    })\n\n    _store[key] = {\n      ...state[key],\n      ..._methods\n    }\n  })\n\n  return _store\n}\n\nfunction connect(mapStateToProps, mapDispatchToProps) {\n  return function (Comp) {\n    return function (props) {\n      const store = useStoreHook()\n      const { state } = useContext(StoreContext)\n      const rootState = state\n      let methods = {}\n      Object.keys(store).forEach(item => {\n        // const _state = rootState[item]\n        methods[item] = {}\n        Object.keys(store[item]).forEach(i => {\n          if (is(Function, store[item][i])) {\n            if (isAsyncFunction(store[item][i]) || inWhich('effects', initStore[item], i)) {\n              methods[item][i] = function (dispatch, state, payload) {\n                return new Promise(async (resolve, reject) => {\n                  try {\n                    await store[item][i](dispatch, rootState, payload)\n                    resolve(newData)\n                  } catch (err) {\n                    reject(err)\n                  }\n                })\n              }\n            } else {\n              methods[item][i] = function (state, payload) {\n                return new Promise((resolve, reject) => {\n                  try {\n                    store[item][i](state, payload)\n                    resolve(state)\n                  } catch (err) {\n                    reject(err)\n                  }\n                })\n              }\n            }\n          }\n        })\n      })\n\n      const stateToProps = mapStateToProps(state)\n      const dispatchToProps = mapDispatchToProps(methods)\n\n      return <Comp {...stateToProps} {...dispatchToProps} {...props} />\n    }\n  }\n}\n\nexport {\n  StoreContext, StoreProvider, useStateHook, useDispatchHook, useStoreHook, connect\n}\n"],"sourceRoot":""}