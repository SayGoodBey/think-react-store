!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([
/*!*******************************!*\
  !*** external "ramda/src/is" ***!
  \*******************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=require("ramda/src/is")},
/*!************************!*\
  !*** external "react" ***!
  \************************/
/*! no static exports found */
/*! exports used: default, useContext, useReducer */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=require("react")},
/*!*************************************************!*\
  !*** external "@babel/runtime/helpers/extends" ***!
  \*************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=require("@babel/runtime/helpers/extends")},
/*!*********************************!*\
  !*** external "ramda/src/path" ***!
  \*********************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=require("ramda/src/path")},
/*!**********************************!*\
  !*** external "ramda/src/clone" ***!
  \**********************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=require("ramda/src/clone")},
/*!*********************************!*\
  !*** external "ramda/src/pick" ***!
  \*********************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=require("ramda/src/pick")},
/*!************************************!*\
  !*** external "ramda/src/isEmpty" ***!
  \************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=require("ramda/src/isEmpty")},
/*!*******************************************!*\
  !*** external "ramda/src/mergeDeepRight" ***!
  \*******************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=require("ramda/src/mergeDeepRight")},
/*!**********************************!*\
  !*** ./src/index.js + 1 modules ***!
  \**********************************/
/*! exports provided: StoreContext, StoreProvider, useStateHook, useDispatchHook, useStoreHook, connect */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with external "@babel/runtime/helpers/extends" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "ramda/src/clone" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "ramda/src/is" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "ramda/src/isEmpty" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "ramda/src/mergeDeepRight" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "ramda/src/path" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "ramda/src/pick" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "react" (<- Module is not an ECMAScript module) */function(e,t,r){"use strict";r.r(t),r.d(t,"StoreContext",(function(){return g})),r.d(t,"StoreProvider",(function(){return M})),r.d(t,"useStateHook",(function(){return H})),r.d(t,"useDispatchHook",(function(){return A})),r.d(t,"useStoreHook",(function(){return D})),r.d(t,"connect",(function(){return J}));var n=r(2),o=r.n(n),c=r(1),u=r.n(c),i=r(0),a=r.n(i),f=r(3),s=r.n(f);function l(e,t){return s()(e,t)}function d(e){return!!e&&"AsyncFunction"===e.constructor.name}function y(e,t,r){return!!t&&(!!t[e]&&(!!t[e][r]||void 0))}function p(e,t=!0){if(!a()(Object,e))return{};let r={};return Object.keys(e).forEach(e=>{r[e]=t}),r}var m=r(4),b=r.n(m),h=r(5),j=r.n(h),v=r(6),x=r.n(v),k=r(7),O=r.n(k);const g=u.a.createContext(),S="hook-loading-clear",w="react-store:cache";let E,P,q,C={},F={},_={};function I(e,t,r,n,o,c){let u;return t.forEach(t=>{l([e,t,r],n)&&(u=function(e,t,...r){const n=l(e,t);if(a()(Function,n))return n(...r)}([e,t,r],n,o,c))}),P=u,u}function M(e){var t;const{store:r,middleware:n}=e;if(!r)return console.error("\n      store 必须有值，类似于：\n      <StoreProvider store={store}>\n      "),null;const o=n.filter(e=>"loading"===e.name).length,i=null==e||null===(t=e.cache)||void 0===t?void 0:t.length;if(o){x()(_)&&Object.keys(r).forEach(e=>{_[e]={...p(l([e,"methods"],r),!1),...p(l([e,"reducers"],r),!1),...p(l([e,"effects"],r),!1)}})}F=r,Object.keys(F).forEach(e=>{C[e]=F[e].state}),!i&&localStorage.getItem(w)&&localStorage.removeItem(w),i&&localStorage.getItem(w)&&(C=O()(C,JSON.parse(localStorage.getItem(w)))),o&&(C.loading=_);const[f,s]=Object(c.useReducer)((function(t,o){if(!o)return r;if(n&&!a()(Array,n))throw new Error("middleware中间件必须为数组");let c=function(e,t){const{key:r,type:n,payload:o}=t,c=r||E;return{...e,[c]:{...e[c],...I(c,["methods","reducers","effects"],n,F,e[c],o)}}}(t,o);return n&&n.forEach(n=>{const u=n(r,t,c,o,q,E,null==e?void 0:e.cache);u&&(c=u)}),c}),C);let m=b()(f);i&&window.addEventListener("beforeunload",()=>{localStorage.setItem(w,JSON.stringify(j()(e.cache,m)))});return u.a.createElement(g.Provider,{value:{state:f,dispatch:async(e,t,r)=>{if(q=void 0,l([E,"reducers",e.type],F))return s(e);if(!d(e)&&y("effects",F[e.key||E],e.type)){E=e.key,q=e.type,o&&s({key:E,type:S,payload:q});const t=l([e.key,"effects",e.type],F);return await t(s,m,e.payload)}if(d(e)||l([E,"effects",e],F))return E=r,q=e.name,o&&s({key:E,type:S,payload:e.name}),await e(s,f,t);if(!d(e)&&a()(Function,e)&&a()(Object,e())){const t=l([e().key,"methods",e().type],F)||l([e().key,"effects",e().type],F);if(a()(Function,t))return E=e().key,q=e().type,o&&s({key:E,type:S,payload:q}),await t(s,f,e().payload)}return s(e)}}},e.children)}function A(e){const t=Object(c.useContext)(g);return e&&(E=e),t.dispatch}function H(e){const t=Object(c.useContext)(g);return l(e?["state",e]:["state"],t)}function D(){const{state:e,dispatch:t}=Object(c.useContext)(g);let r={};return Object.keys(e).forEach(n=>{let o={};const c={...l([n,"methods"],F),...l([n,"reducers"],F),...l([n,"effects"],F)},u=c&&Object.keys(c);a()(Array,u)&&u.forEach(e=>{(d(c[e])||y("effects",F[n],e))&&(o[e]=async r=>{await t(c[e],r,n)}),!d(c[e])&&a()(Function,c[e])&&(o[e]=r=>{t({key:n,type:e,payload:r})})}),r[n]={...e[n],...o}}),r}function J(e,t){return function(r){return function(n){const i=D(),{state:f}=Object(c.useContext)(g),s=f;let l={};Object.keys(i).forEach(e=>{l[e]={},Object.keys(i[e]).forEach(t=>{a()(Function,i[e][t])&&(d(i[e][t])||y("effects",F[e],t)?l[e][t]=function(r,n,o){return new Promise(async(n,c)=>{try{await i[e][t](r,s,o),n(P)}catch(e){c(e)}})}:l[e][t]=function(r,n){return new Promise((o,c)=>{try{i[e][t](r,n),o(r)}catch(e){c(e)}})})})});const p=e(f),m=t(l);return u.a.createElement(r,o()({},p,m,n))}}}}])}));
//# sourceMappingURL=index.min.js.map